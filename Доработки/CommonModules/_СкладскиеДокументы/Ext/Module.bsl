
Процедура ПриходныйОрдерНаТовары_ПриСозданииНаСервере_ФормаДокумента(Форма, Отказ, СтандартнаяОбработка) Экспорт
	
	Форма.Элементы.Статус.РежимВыбораИзСписка = Истина;
	Форма.Элементы.Статус.СписокВыбора.Добавить(Перечисления.СтатусыПриходныхОрдеров.КПоступлению);
	
	Если Пользователи.РолиДоступны("_ПриниматьСкладскиеДокументыВручнуюПриходныйОрдер")
		ИЛИ Форма.Объект.Статус = Перечисления.СтатусыПриходныхОрдеров.Принят
		ИЛИ НЕ ЕстьТоварыССериями(Форма.Объект.Товары) Тогда
		Форма.Элементы.Статус.СписокВыбора.Добавить(Перечисления.СтатусыПриходныхОрдеров.Принят);
	КонецЕсли;
	
КонецПроцедуры	

Процедура РасходныйОрдерНаТовары_ПриСозданииНаСервере_ФормаДокумента(Форма, Отказ, СтандартнаяОбработка) Экспорт
	
	Форма.Элементы.Статус.РежимВыбораИзСписка = Истина;
	Форма.Элементы.Статус.СписокВыбора.Добавить(Перечисления.СтатусыРасходныхОрдеров.Подготовлено);
	
	Если Пользователи.РолиДоступны("_ПриниматьСкладскиеДокументыВручнуюРасходныйОрдер")
		ИЛИ Форма.Объект.Статус = Перечисления.СтатусыРасходныхОрдеров.Отгружен
		ИЛИ НЕ ЕстьТоварыССериями(Форма.Объект.ОтгружаемыеТовары) Тогда
		Форма.Элементы.Статус.СписокВыбора.Добавить(Перечисления.СтатусыРасходныхОрдеров.Отгружен);
	КонецЕсли;	
	
	Форма.Элементы.Статус.УстановитьДействие("НачалоВыбора", "");
	
КонецПроцедуры

Функция ЕстьТоварыССериями(Таблица) Экспорт
	
	Для каждого СтрокаТЗ из Таблица Цикл
		
		ИспользоватьСерии = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(СтрокаТЗ.Номенклатура, "ВидНоменклатуры.ИспользоватьСерии");
		Если ИспользоватьСерии Тогда
			Возврат Истина;
		КонецЕсли;	
		
	КонецЦикла;	
	
	Возврат Ложь;
	
КонецФункции	